<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>¡El Duelo Comienza! - Olimpiadas Matemáticas</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      body {
        font-family: "Poppins", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        position: relative;
        overflow: hidden;
      }

      .fade-in {
        animation: fadeIn 1s ease-out forwards;
        opacity: 0;
      }

      @keyframes fadeIn {
        to {
          opacity: 1;
        }
      }

      .scale-in {
        animation: scaleIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
        transform: scale(0);
      }

      @keyframes scaleIn {
        to {
          transform: scale(1);
        }
      }

      .countdown-number {
        font-size: 20rem;
        line-height: 1;
        font-weight: 900;
        text-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
        animation: popNumber 0.5s ease-out;
      }

      @keyframes popNumber {
        0% {
          transform: scale(0.5);
          opacity: 0;
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
          opacity: 1;
        }
      }

      .final-text {
        animation: slideUp 0.6s ease-out;
      }

      @keyframes slideUp {
        from {
          transform: translateY(30px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .team-card {
        background: rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(12px);
        border: 2px solid rgba(255, 255, 255, 0.4);
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
      }

      .team-badge {
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.35);
      }

      .vs-badge {
        background: linear-gradient(135deg, #fde047, #facc15, #f59e0b);
        box-shadow: 0 0 40px rgba(253, 224, 71, 0.6),
          0 8px 24px rgba(0, 0, 0, 0.3);
      }

      /* Manejo de texto largo - SIN guiones */
      .team-name {
        word-wrap: break-word;
        overflow-wrap: break-word;
        line-height: 1.2;
      }
    </style>
  </head>
  <body class="flex items-center justify-center min-h-screen text-white p-6">
    <div id="container" class="text-center w-full max-w-7xl relative z-10">
      <!-- Pantalla de presentación de equipos -->
      <div id="teams-display" class="transition-opacity duration-1000">
        <!-- Título superior -->
        <div class="mb-12 fade-in">
          <div class="inline-block">
            <div class="flex items-center justify-center space-x-4 mb-3">
              <div
                class="w-16 h-1 bg-gradient-to-r from-transparent via-yellow-300 to-yellow-300 rounded-full"
              ></div>
              <i
                class="fas fa-trophy text-yellow-300 text-4xl drop-shadow-lg"
              ></i>
              <div
                class="w-16 h-1 bg-gradient-to-l from-transparent via-yellow-300 to-yellow-300 rounded-full"
              ></div>
            </div>
            <h1
              class="text-4xl md:text-5xl font-black text-white tracking-wide uppercase mb-2 drop-shadow-lg"
            >
              Olimpiadas Matemáticas
            </h1>
            <p class="text-xl text-yellow-200 font-semibold drop-shadow-md">
              Duelo de Conocimiento
            </p>
          </div>
        </div>

        <!-- Equipos enfrentados -->
        <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 items-stretch mb-12">
          <!-- Equipo 1 -->
          <div class="fade-in flex" style="animation-delay: 0.2s">
            <div
              class="team-card p-8 rounded-3xl transition-transform hover:scale-105 w-full flex flex-col justify-between min-h-[320px]"
            >
              <div class="mb-4">
                <div
                  class="inline-block bg-gradient-to-br from-green-400 to-emerald-500 team-badge w-20 h-20 rounded-2xl flex items-center justify-center transform rotate-6"
                >
                  <i
                    class="fas fa-graduation-cap text-4xl text-white transform -rotate-6"
                  ></i>
                </div>
              </div>
              <div class="flex-grow flex items-center justify-center mb-4 px-4">
                <h2
                  class="team-name text-2xl sm:text-3xl md:text-4xl font-black text-white drop-shadow-lg text-center"
                >
                  {{ teams[0] }}
                </h2>
              </div>
              <div
                class="inline-block bg-green-400/40 backdrop-blur-sm px-5 py-2 rounded-full border-2 border-green-300 mx-auto"
              >
                <p
                  class="text-green-50 font-bold text-sm uppercase tracking-wider"
                >
                  Equipo Verde
                </p>
              </div>
            </div>
          </div>

          <!-- VS Central -->
          <div
            class="scale-in flex items-center justify-center"
            style="animation-delay: 0.4s"
          >
            <div class="relative">
              <div
                class="vs-badge w-32 h-32 mx-auto rounded-3xl flex items-center justify-center border-4 border-yellow-200 transform rotate-12"
              >
                <span
                  class="text-6xl font-black text-gray-900 transform -rotate-12 drop-shadow-md"
                  >VS</span
                >
              </div>
              <div class="mt-6"></div>
            </div>
          </div>

          <!-- Equipo 2 -->
          <div class="fade-in flex" style="animation-delay: 0.6s">
            <div
              class="team-card p-8 rounded-3xl transition-transform hover:scale-105 w-full flex flex-col justify-between min-h-[320px]"
            >
              <div class="mb-4">
                <div
                  class="inline-block bg-gradient-to-br from-red-400 to-rose-500 team-badge w-20 h-20 rounded-2xl flex items-center justify-center transform -rotate-6"
                >
                  <i
                    class="fas fa-graduation-cap text-4xl text-white transform rotate-6"
                  ></i>
                </div>
              </div>
              <div class="flex-grow flex items-center justify-center mb-4 px-4">
                <h2
                  class="team-name text-2xl sm:text-3xl md:text-4xl font-black text-white drop-shadow-lg text-center"
                >
                  {{ teams[1] }}
                </h2>
              </div>
              <div
                class="inline-block bg-red-400/40 backdrop-blur-sm px-5 py-2 rounded-full border-2 border-red-300 mx-auto"
              >
                <p
                  class="text-red-50 font-bold text-sm uppercase tracking-wider"
                >
                  Equipo Rojo
                </p>
              </div>
            </div>
          </div>
        </div>

        <!-- Mensaje motivacional -->
        <div class="fade-in" style="animation-delay: 0.8s">
          <div
            class="inline-block bg-white/25 backdrop-blur-md px-8 py-4 rounded-2xl border-2 border-white/50 shadow-xl"
          >
            <p
              class="text-xl md:text-2xl font-bold text-white flex items-center drop-shadow-lg"
            >
              ¡Que comience la batalla de mentes!
            </p>
          </div>
        </div>
      </div>

      <!-- Pantalla de cuenta regresiva -->
      <div
        id="countdown-display"
        class="fixed inset-0 flex items-center justify-center"
      ></div>
    </div>

    <script>
      const teamsDisplay = document.getElementById("teams-display");
      const countdownDisplay = document.getElementById("countdown-display");
      const redirectUrl = "{{ url_for('quiz.quiz_question') }}";

      const steps = [
        { text: "3", type: "number", color: "text-cyan-200" },
        { text: "2", type: "number", color: "text-pink-200" },
        { text: "1", type: "number", color: "text-yellow-200" },
        { text: "¡QUE GANE EL MEJOR!", type: "final" },
        { text: "¡COMIENZA EL DUELO!", type: "launch" },
      ];

      let currentStep = 0;

      function startCountdown() {
        if (currentStep < steps.length) {
          countdownDisplay.innerHTML = "";
          const step = steps[currentStep];
          const textEl = document.createElement("h1");
          textEl.textContent = step.text;

          if (step.type === "number") {
            textEl.className = `countdown-number font-black ${step.color}`;
            textEl.style.filter =
              "drop-shadow(0 0 30px rgba(255, 255, 255, 0.5))";
          } else if (step.type === "final") {
            textEl.className =
              "final-text text-6xl md:text-7xl font-black text-white py-6";
            textEl.style.filter = "drop-shadow(0 10px 20px rgba(0, 0, 0, 0.3))";
            textEl.innerHTML =
              '<div class="flex items-center justify-center"><i class="fas fa-trophy text-yellow-300 mr-4 text-6xl"></i><span>' +
              step.text +
              '</span><i class="fas fa-trophy text-yellow-300 ml-4 text-6xl"></i></div>';
          } else {
            textEl.className =
              "final-text text-6xl md:text-8xl font-black py-6";
            textEl.style.background =
              "linear-gradient(135deg, #34d399, #60a5fa, #fde047)";
            textEl.style.webkitBackgroundClip = "text";
            textEl.style.webkitTextFillColor = "transparent";
            textEl.style.backgroundClip = "text";
            textEl.style.filter = "drop-shadow(0 10px 20px rgba(0, 0, 0, 0.3))";
            textEl.innerHTML =
              '<div class="flex items-center justify-center"><i class="fas fa-rocket mr-4 text-6xl" style="color: #34d399;"></i><span>' +
              step.text +
              '</span><i class="fas fa-rocket ml-4 text-6xl" style="color: #fde047;"></i></div>';
          }

          countdownDisplay.appendChild(textEl);
          currentStep++;

          const nextDelay =
            step.type === "launch" ? 1500 : step.type === "final" ? 1800 : 1200;
          setTimeout(startCountdown, nextDelay);
        } else {
          setTimeout(() => {
            window.location.href = redirectUrl;
          }, 500);
        }
      }

      setTimeout(() => {
        teamsDisplay.style.opacity = "0";
        setTimeout(startCountdown, 1000);
      }, 5000);
    </script>
  </body>
</html>
